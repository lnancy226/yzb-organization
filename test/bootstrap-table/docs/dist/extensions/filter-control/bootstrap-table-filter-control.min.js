(function(i){var q=i.fn.bootstrapTable.utils.sprintf,B=i.fn.bootstrapTable.utils.objectKeys;var f=function(D){return D.get(D.length-1).options};var j=function(F,G){var D=f(F);for(var E=0;E<D.length;E++){if(D[E].value!==""){if(!G.hasOwnProperty(D[E].value)){F.find(q("option[value='%s']",D[E].value)).hide()}else{F.find(q("option[value='%s']",D[E].value)).show()}}}};var A=function(E,D,F){D=i.trim(D);E=i(E.get(E.length-1));if(!x(E,D)){E.append(i("<option></option>").attr("value",D).text(i("<div />").html(F).text()))}};var b=function(E){var D=E.find("option:gt(0)");D.sort(function(G,F){G=i(G).text().toLowerCase();F=i(F).text().toLowerCase();if(i.isNumeric(G)&&i.isNumeric(F)){G=parseFloat(G);F=parseFloat(F)}return G>F?1:G<F?-1:0});E.find("option:gt(0)").remove();E.append(D)};var x=function(G,F){var D=f(G);for(var E=0;E<D.length;E++){if(D[E].value===F.toString()){return true}}return false};var w=function(D){D.$tableHeader.css("height","77px")};var h=function(D){var E=D.$header;if(D.options.height){E=D.$tableHeader}return E};var k=function(D){var E="select, input";if(D.options.height){E="table select, table input"}return E};var m=function(F){if(i.fn.bootstrapTable.utils.isIEBrowser()){if(i(F).is("input")){var G=0;if("selectionStart" in F){G=F.selectionStart}else{if("selection" in document){F.focus();var D=document.selection.createRange();var E=document.selection.createRange().text.length;D.moveStart("character",-F.value.length);G=D.text.length-E}}return G}else{return -1}}else{return -1}};var z=function(E,D){if(i.fn.bootstrapTable.utils.isIEBrowser()){if(E.setSelectionRange!==undefined){E.setSelectionRange(D,D)}else{i(E).val(E.value)}}};var s=function(D){var F=h(D),E=k(D);D.options.valuesFilterControl=[];F.find(E).each(function(){D.options.valuesFilterControl.push({field:i(this).closest("[data-field]").data("field"),value:i(this).val(),position:m(i(this).get(0))})})};var y=function(E){var F=null,D=[],H=h(E),G=k(E);if(E.options.valuesFilterControl.length>0){H.find(G).each(function(I,J){F=i(this).closest("[data-field]").data("field");D=i.grep(E.options.valuesFilterControl,function(K){return K.field===F});if(D.length>0){i(this).val(D[0].value);z(i(this).get(0),D[0].position)}})}};var r=function v(){var E=[],D=document.cookie.match(/(?:bs.table.)(\w*)/g);if(D){i.each(D,function(G,F){if(/./.test(F)){F=F.split(".").pop()}if(i.inArray(F,E)===-1){E.push(F)}});return E}};var e=function(H){var I=H.data,G=H.pageTo<H.options.data.length?H.options.data.length:H.pageTo,F=function(K){return K.filterControl&&K.filterControl.toLowerCase()==="select"&&K.searchable},D=function(K){return K.filterData===undefined||K.filterData.toLowerCase()==="column"},E=function(K){return K&&K.length>0};var J=H.options.pagination?(H.options.sidePagination==="server"?H.pageTo:H.options.totalRows):H.pageTo;i.each(H.header.fields,function(M,R){var L=H.columns[i.fn.bootstrapTable.utils.getFieldIndex(H.columns,R)],P=i(".bootstrap-table-filter-control-"+C(L.field));if(F(L)&&D(L)&&E(P)){if(P.get(P.length-1).options.length===0){A(P,"","")}var Q={};for(var O=0;O<J;O++){var K=I[O][R],N=i.fn.bootstrapTable.utils.calculateObjectValue(H.header,H.header.formatters[M],[K,I[O],O],K);Q[N]=K}for(var S in Q){A(P,Q[S],S)}b(P);if(H.options.hideUnusedSelectOptions){j(P,Q)}}})};var C=function(D){return String(D).replace(/(:|\.|\[|\]|,)/g,"\\$1")};var t=function(F,I){var G=false,D,E,H=0;i.each(F.columns,function(N,O){D="hidden";E=[];if(!O.visible){return}if(!O.filterControl){E.push('<div class="no-filter-control"></div>')}else{E.push('<div class="filter-control">');var Q=O.filterControl.toLowerCase();if(O.searchable&&F.options.filterTemplate[Q]){G=true;D="visible";E.push(F.options.filterTemplate[Q](F,O.field,D,O.filterControlPlaceholder))}}i.each(I.children().children(),function(R,S){S=i(S);if(S.data("field")===O.field){S.find(".fht-cell").append(E.join(""));return false}});if(O.filterData!==undefined&&O.filterData.toLowerCase()!=="column"){var K=d(g,O.filterData.substring(0,O.filterData.indexOf(":")));var J,P;if(K!==null){J=O.filterData.substring(O.filterData.indexOf(":")+1,O.filterData.length);P=i(".bootstrap-table-filter-control-"+C(O.field));A(P,"","");K(J,P)}else{throw new SyntaxError('Error. You should use any of these allowed filter data methods: var, json, url. Use like this: var: {key: "value"}')}var L,M;switch(K){case"url":i.ajax({url:J,dataType:"json",success:function(S){for(var R in S){A(P,R,S[R])}b(P)}});break;case"var":L=window[J];for(M in L){A(P,M,L[M])}b(P);break;case"jso":L=JSON.parse(J);for(M in L){A(P,M,L[M])}b(P);break}}});if(G){I.off("keyup","input").on("keyup","input",function(J){clearTimeout(H);H=setTimeout(function(){F.onColumnSearch(J)},F.options.searchTimeOut)});I.off("change","select").on("change","select",function(J){clearTimeout(H);H=setTimeout(function(){F.onColumnSearch(J)},F.options.searchTimeOut)});I.off("mouseup","input").on("mouseup","input",function(K){var L=i(this),J=L.val();if(J===""){return}setTimeout(function(){var M=L.val();if(M===""){clearTimeout(H);H=setTimeout(function(){F.onColumnSearch(K)},F.options.searchTimeOut)}},1)});if(I.find(".date-filter-control").length>0){i.each(F.columns,function(J,K){if(K.filterControl!==undefined&&K.filterControl.toLowerCase()==="datepicker"){I.find(".date-filter-control.bootstrap-table-filter-control-"+K.field).datepicker(K.filterDatepickerOptions).on("changeDate",function(L){i(q(".%s",L.currentTarget.classList.toString().split(" ").join("."))).val(L.currentTarget.value);i(L.currentTarget).keyup()})}})}}else{I.find(".filterControl").hide()}};var l=function(D){D=D===undefined?"left":D.toLowerCase();switch(D){case"left":return"ltr";case"right":return"rtl";case"auto":return"auto";default:return"ltr"}};var g={"var":function(D,G){var E=window[D];for(var F in E){A(G,F,E[F])}b(G)},url:function(D,E){i.ajax({url:D,dataType:"json",success:function(G){for(var F in G){A(E,F,G[F])}b(E)}})},json:function(D,G){var E=JSON.parse(D);for(var F in E){A(G,F,E[F])}b(G)}};var d=function(G,D){var F=Object.keys(G);for(var E=0;E<F.length;E++){if(F[E]===D){return G[D]}}return null};i.extend(i.fn.bootstrapTable.defaults,{filterControl:false,onColumnSearch:function(D,E){return false},filterShowClear:false,alignmentSelectControlOptions:undefined,filterTemplate:{input:function(E,F,D,G){return q('<input type="text" class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" placeholder="%s">',F,D,G)},select:function(E,F,D){return q('<select class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" dir="%s"></select>',F,D,l(E.options.alignmentSelectControlOptions))},datepicker:function(E,F,D){return q('<input type="text" class="form-control date-filter-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s">',F,D)}},valuesFilterControl:[]});i.extend(i.fn.bootstrapTable.COLUMN_DEFAULTS,{filterControl:undefined,filterData:undefined,filterDatepickerOptions:undefined,filterStrictSearch:false,filterStartsWithSearch:false,filterControlPlaceholder:""});i.extend(i.fn.bootstrapTable.Constructor.EVENTS,{"column-search.bs.table":"onColumnSearch"});i.extend(i.fn.bootstrapTable.defaults.icons,{clear:"glyphicon-trash icon-clear"});i.extend(i.fn.bootstrapTable.locales,{formatClearFilters:function(){return"Clear Filters"}});i.extend(i.fn.bootstrapTable.defaults,i.fn.bootstrapTable.locales);var p=i.fn.bootstrapTable.Constructor,o=p.prototype.init,c=p.prototype.initToolbar,n=p.prototype.initHeader,u=p.prototype.initBody,a=p.prototype.initSearch;p.prototype.init=function(){if(this.options.filterControl){var D=this;if(!Object.keys){B()}this.options.valuesFilterControl=[];this.$el.on("reset-view.bs.table",function(){if(!D.options.height){return}if(D.$tableHeader.find("select").length>0||D.$tableHeader.find("input").length>0){return}t(D,D.$tableHeader)}).on("post-header.bs.table",function(){y(D)}).on("post-body.bs.table",function(){if(D.options.height){w(D)}}).on("column-switch.bs.table",function(){y(D)})}o.apply(this,Array.prototype.slice.apply(arguments))};p.prototype.initToolbar=function(){this.showToolbar=this.options.filterControl&&this.options.filterShowClear;c.apply(this,Array.prototype.slice.apply(arguments));if(this.options.filterControl&&this.options.filterShowClear){var D=this.$toolbar.find(">.btn-group"),E=D.find(".filter-show-clear");if(!E.length){E=i(['<button class="btn btn-default filter-show-clear" ',q('type="button" title="%s">',this.options.formatClearFilters()),q('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.clear),"</button>"].join("")).appendTo(D);E.off("click").on("click",i.proxy(this.clearFilterControl,this))}}};p.prototype.initHeader=function(){n.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.filterControl){return}t(this,this.$header)};p.prototype.initBody=function(){u.apply(this,Array.prototype.slice.apply(arguments));e(this)};p.prototype.initSearch=function(){a.apply(this,Array.prototype.slice.apply(arguments));if(this.options.sidePagination==="server"){return}var E=this;var D=i.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=D?i.grep(this.data,function(J,I){for(var H in D){var G=E.columns[i.fn.bootstrapTable.utils.getFieldIndex(E.columns,H)];var F=D[H].toLowerCase();var K=J[H];if(G&&G.searchFormatter){K=i.fn.bootstrapTable.utils.calculateObjectValue(E.header,E.header.formatters[i.inArray(H,E.header.fields)],[K,J,I],K)}if(G.filterStrictSearch){if(!(i.inArray(H,E.header.fields)!==-1&&(typeof K==="string"||typeof K==="number")&&K.toString().toLowerCase()===F.toString().toLowerCase())){return false}}else{if(G.filterStartsWithSearch){if(!(i.inArray(H,E.header.fields)!==-1&&(typeof K==="string"||typeof K==="number")&&(K+"").toLowerCase().indexOf(F)===0)){return false}}else{if(!(i.inArray(H,E.header.fields)!==-1&&(typeof K==="string"||typeof K==="number")&&(K+"").toLowerCase().indexOf(F)!==-1)){return false}}}}return true}):this.data};p.prototype.initColumnSearch=function(D){s(this);if(D){this.filterColumnsPartial=D;this.updatePagination();for(var E in D){this.trigger("column-search",E,D[E])}}};p.prototype.onColumnSearch=function(E){if(i.inArray(E.keyCode,[37,38,39,40])>-1){return}s(this);var F=i.trim(i(E.currentTarget).val());var D=i(E.currentTarget).closest("[data-field]").data("field");if(i.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(F){this.filterColumnsPartial[D]=F}else{delete this.filterColumnsPartial[D]}this.searchText+="randomText";this.options.pageNumber=1;this.onSearch(E);this.trigger("column-search",D,F)};p.prototype.clearFilterControl=function(){if(this.options.filterControl&&this.options.filterShowClear){var H=this,G=r(),K=h(H),F=K.closest("table"),D=K.find(k(H)),E=H.$toolbar.find(".search input"),I=0;i.each(H.options.valuesFilterControl,function(L,M){M.value=""});y(H);if(D.length>0){this.filterColumnsPartial={};i(D[0]).trigger(D[0].tagName==="INPUT"?"keyup":"change")}else{return}if(E.length>0){H.resetSearch()}if(H.options.sortName!==F.data("sortName")||H.options.sortOrder!==F.data("sortOrder")){var J=K.find(q('[data-field="%s"]',i(D[0]).closest("table").data("sortName")));if(J.length>0){H.onSort(F.data("sortName"),F.data("sortName"));i(J).find(".sortable").trigger("click")}}clearTimeout(I);I=setTimeout(function(){if(G&&G.length>0){i.each(G,function(L,M){if(H.deleteCookie!==undefined){H.deleteCookie(M)}})}},H.options.searchTimeOut)}}})(jQuery);