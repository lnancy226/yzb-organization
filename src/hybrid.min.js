window.onerror=function(a){log("window.onerror: "+a)};function setupWebViewJavascriptBridge(b){if(window.WebViewJavascriptBridge){return b(WebViewJavascriptBridge)}if(window.WVJBCallbacks){return window.WVJBCallbacks.push(b)}window.WVJBCallbacks=[b];var a=document.createElement("iframe");a.style.display="none";a.src="wvjbscheme://__BRIDGE_LOADED__";document.documentElement.appendChild(a);setTimeout(function(){document.documentElement.removeChild(a)},0);console.log(window.WVJBCallbacks)}setupWebViewJavascriptBridge(function(c){var b=1;function a(f,g){var e=document.getElementById("log");var d=document.createElement("div");d.className="logLine";d.innerHTML=b+++". "+f+":<br/>"+JSON.stringify(g);if(e.children.length){e.insertBefore(d,e.children[0])}else{e.appendChild(d)}}c.registerHandler("getUserInfos",function(e,d){console.log(e);a("Get user information from ObjC: ",e);d({userId:"123456",blog:"标哥的技术博客"})});c.callHandler("getUserIdFromObjC",function(e){var d=e.accessToken;$.cookie("Authorization",d);a("JS call ObjC's getUserIdFromObjC function, and js received response CCCCCCCCCC:",e)});$("#back").on("tap",function(){c.callHandler("getBack",function(){a("返回原生机构入口")})});$("#close").on("tap",function(){c.callHandler("closeOrg",function(){a("关闭机构")})})});