(function(f){f.extend(f.fn.bootstrapTable.defaults,{clickEdit:false});function b(i,h){var j=f("<option />");if(h){f(h).each(function(l,k){j.clone().text(k.idxNum+" "+k.name).val(k.idxNum).appendTo(i)})}else{console.log("Please setup options first!!")}}function d(q,k){var m=[],s=q,n='<button type="button" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button>',t='<button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>';var p=function(){m=[];k.find("td").find('input[type="text"]').each(function(l,u){m.push(f(u).eq(0).val())});k.find("select").each(function(l,u){m.push(f("#"+u.id+" option:selected").val())});f("#table").bootstrapTable("updateRow",{index:s.$data.thId,row:{noOld:m[0],area:k.find("select").eq(0).children(":selected").text(),town:k.find("select").eq(1).children(":selected").text(),address:m[1]}});f("#tooling").remove();s.editing=true;return false};var r=function(){f("#table").bootstrapTable("updateRow",{index:s.$data.thId,row:{}});f("#tooling").remove();s.editing=true;return false};if(s.editing){var o=0;s.editing=false;s.columns.forEach(function(w,v){if(!w.editable){return}switch(w.editable){case"input":var x=f('<div class="editable-input col-md-12 col-sm-12 col-xs-12" style="position: relative;"/>');m.push(k.find("td").eq(w.fieldIndex).text());x.append(f('<input type="text" class="form-control input-sm"/>'));x.append(f('<span class="clear"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span>'));k.find("td").eq(w.fieldIndex).text("").append(x);break;case"select":var l=f('<select id="'+w.field+'">'),u=f.selectArray[w.field];k.find("td").eq(w.fieldIndex).text("").append(l);b(f("#"+w.field),u);break;case"textarea":break;default:console.log(w.fieldIndex+" "+w.editable)}},q);for(var j=0,h=m.length;j<h;j++){k.find('input[type="text"]').eq(j).val(m[j])}k.find("td").last().append('<div id="tooling" class="editable-buttons"/>');f(".clear").on("click",function(){f(this).parent().find("input").val("")});f(n).on("click",p).appendTo("#tooling");f(t).on("click",r).appendTo("#tooling")}}function g(i,k){var j=f(i).find("a").attr("href").match(/\d+/g)[0];var h={treeId:j,oldTreeSerialNo:k[0],adminDivision:k[2],adminUnit:k[3],treeAddr:k[1]};store("data/update",h)}var a=f.fn.bootstrapTable.Constructor,e=a.prototype.initTable,c=a.prototype.initBody;a.prototype.initTable=function(){var h=this;this.$data={};e.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){return}};a.prototype.initBody=function(){var i=this;c.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){return}var h=this.$tableBody.find("table");i.editing=true;h.on("click-row.bs.table",function(l,m,j,k){if(k==="no"){return}this.$data.thId=j.data().index;this.$data.itemid=j.data().uniqueid;this.$data.divi=parseInt(m.area);this.$data.town=parseInt(m.town);d(this,j)}.bind(this))}})(jQuery);