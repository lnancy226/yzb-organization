(function(e){var f={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var d=function(x){var y=x.$header;if(x.options.height){y=x.$tableHeader}return y};var g=function(x){var y="select, input";if(x.options.height){y="table select, table input"}return y};var n=function(){return !!(navigator.cookieEnabled)};var u=function(A,x){var y=-1;for(var z=0;z<x.length;z++){if(A.toLowerCase()===x[z].toLowerCase()){y=z;break}}return y};var m=function(x,z,y){if((!x.options.cookie)||(!n())||(x.options.cookieIdTable==="")){return}if(u(z,x.options.cookiesEnabled)===-1){return}z=x.options.cookieIdTable+"."+z;switch(x.options.cookieStorage){case"cookieStorage":document.cookie=[z,"=",y,"; expires="+x.options.cookieExpire,x.options.cookiePath?"; path="+x.options.cookiePath:"",x.options.cookieDomain?"; domain="+x.options.cookieDomain:"",x.options.cookieSecure?"; secure":""].join("");break;case"localStorage":localStorage.setItem(z,y);break;case"sessionStorage":sessionStorage.setItem(z,y);break;default:return false}return true};var p=function(y,x,B){if(!B){return null}if(u(B,y.options.cookiesEnabled)===-1){return null}B=x+"."+B;switch(y.options.cookieStorage){case"cookieStorage":var z="; "+document.cookie;var A=z.split("; "+B+"=");return A.length===2?A.pop().split(";").shift():null;case"localStorage":return localStorage.getItem(B);case"sessionStorage":return sessionStorage.getItem(B);default:return null}};var c=function(y,x,z){z=x+"."+z;switch(y.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(z),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",y.options.cookiePath?"; path="+y.options.cookiePath:"",y.options.cookieDomain?"; domain="+y.options.cookieDomain:""].join("");break;case"localStorage":localStorage.removeItem(z);break;case"sessionStorage":sessionStorage.removeItem(z);break}return true};var t=function(x){var y=x.replace(/[0-9]*/,"");x=x.replace(/[A-Za-z]{1,2}}/,"");switch(y.toLowerCase()){case"s":x=+x;break;case"mi":x=x*60;break;case"h":x=x*60*60;break;case"d":x=x*24*60*60;break;case"m":x=x*30*24*60*60;break;case"y":x=x*365*24*60*60;break;default:x=undefined;break}return x===undefined?"":"; max-age="+x};var b=function(x){setTimeout(function(){var z=JSON.parse(p(x,x.options.cookieIdTable,f.filterControl));if(!x.options.filterControlValuesLoaded&&z){var y={},C=d(x),B=g(x),A=function(E,D){e(D).each(function(G,F){if(F.text!==""){e(E).val(F.text);y[F.field]=F.text}})};C.find(B).each(function(){var E=e(this).closest("[data-field]").data("field"),D=e.grep(z,function(F){return F.field===E});A(this,D)});x.initColumnSearch(y);x.options.filterControlValuesLoaded=true;x.initServer()}},250)};e.extend(e.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});e.fn.bootstrapTable.methods.push("getCookies");e.fn.bootstrapTable.methods.push("deleteCookie");e.extend(e.fn.bootstrapTable.utils,{setCookie:m,getCookie:p});var k=e.fn.bootstrapTable.Constructor,j=k.prototype.init,i=k.prototype.initTable,h=k.prototype.initServer,w=k.prototype.onSort,q=k.prototype.onPageNumber,r=k.prototype.onPageListChange,s=k.prototype.onPagePre,a=k.prototype.onPageNext,o=k.prototype.toggleColumn,l=k.prototype.selectPage,v=k.prototype.onSearch;k.prototype.init=function(){this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var x=this;this.$el.on("column-search.bs.table",function(B,A,C){var z=true;for(var y=0;y<x.options.filterControls.length;y++){if(x.options.filterControls[y].field===A){x.options.filterControls[y].text=C;z=false;break}}if(z){x.options.filterControls.push({field:A,text:C})}m(x,f.filterControl,JSON.stringify(x.options.filterControls))}).on("post-body.bs.table",b(x))}j.apply(this,Array.prototype.slice.apply(arguments))};k.prototype.initServer=function(){var y=this;if(y.options.cookie&&y.options.filterControl&&!y.options.filterControlValuesLoaded){var x=JSON.parse(p(y,y.options.cookieIdTable,f.filterControl));if(x){return}}h.apply(this,Array.prototype.slice.apply(arguments))};k.prototype.initTable=function(){i.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};k.prototype.initCookie=function(){if(!this.options.cookie){return}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!n())){console.error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies");this.options.cookie=false;return}var x=p(this,this.options.cookieIdTable,f.sortOrder),z=p(this,this.options.cookieIdTable,f.sortName),y=p(this,this.options.cookieIdTable,f.pageNumber),C=p(this,this.options.cookieIdTable,f.pageList),B=JSON.parse(p(this,this.options.cookieIdTable,f.columns)),A=p(this,this.options.cookieIdTable,f.searchText);this.options.sortOrder=x?x:this.options.sortOrder;this.options.sortName=z?z:this.options.sortName;this.options.pageNumber=y?+y:this.options.pageNumber;this.options.pageSize=C?C===this.options.formatAllRows()?C:+C:this.options.pageSize;this.options.searchText=A?A:"";if(B){e.each(this.columns,function(D,E){E.visible=e.inArray(E.field,B)!==-1})}};k.prototype.onSort=function(){w.apply(this,Array.prototype.slice.apply(arguments));m(this,f.sortOrder,this.options.sortOrder);m(this,f.sortName,this.options.sortName)};k.prototype.onPageNumber=function(){q.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,this.options.pageNumber);return false};k.prototype.onPageListChange=function(){r.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageList,this.options.pageSize);return false};k.prototype.onPagePre=function(){s.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,this.options.pageNumber);return false};k.prototype.onPageNext=function(){a.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,this.options.pageNumber);return false};k.prototype.toggleColumn=function(){o.apply(this,Array.prototype.slice.apply(arguments));var x=[];e.each(this.columns,function(y,z){if(z.visible){x.push(z.field)}});m(this,f.columns,JSON.stringify(x))};k.prototype.selectPage=function(x){l.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,x)};k.prototype.onSearch=function(){var x=Array.prototype.slice.apply(arguments);v.apply(this,x);if(e(x[0].currentTarget).parent().hasClass("search")){m(this,f.searchText,this.searchText)}};k.prototype.getCookies=function(){var y=this;var x={};e.each(f,function(z,A){x[z]=p(y,y.options.cookieIdTable,A);if(z==="columns"){x[z]=JSON.parse(x[z])}});return x};k.prototype.deleteCookie=function(x){if((x==="")||(!n())){return}c(this,this.options.cookieIdTable,f[x])}})(jQuery);