(function(T){var S={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var U=function(b){var a=b.$header;if(b.options.height){a=b.$tableHeader}return a};var R=function(b){var a="select, input";if(b.options.height){a="table select, table input"}return a};var K=function(){return !!(navigator.cookieEnabled)};var C=function(c,b){var a=-1;for(var d=0;d<b.length;d++){if(c.toLowerCase()===b[d].toLowerCase()){a=d;break}}return a};var L=function(b,c,a){if((!b.options.cookie)||(!K())||(b.options.cookieIdTable==="")){return}if(C(c,b.options.cookiesEnabled)===-1){return}c=b.options.cookieIdTable+"."+c;switch(b.options.cookieStorage){case"cookieStorage":document.cookie=[c,"=",a,"; expires="+b.options.cookieExpire,b.options.cookiePath?"; path="+b.options.cookiePath:"",b.options.cookieDomain?"; domain="+b.options.cookieDomain:"",b.options.cookieSecure?"; secure":""].join("");break;case"localStorage":localStorage.setItem(c,a);break;case"sessionStorage":sessionStorage.setItem(c,a);break;default:return false}return true};var I=function(a,b,c){if(!c){return null}if(C(c,a.options.cookiesEnabled)===-1){return null}c=b+"."+c;switch(a.options.cookieStorage){case"cookieStorage":return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(c).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;case"localStorage":return localStorage.getItem(c);case"sessionStorage":return sessionStorage.getItem(c);default:return null}};var V=function(a,b,c){c=b+"."+c;switch(a.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(c),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",a.options.cookiePath?"; path="+a.options.cookiePath:"",a.options.cookieDomain?"; domain="+a.options.cookieDomain:""].join("");break;case"localStorage":localStorage.removeItem(c);break;case"sessionStorage":sessionStorage.removeItem(c);break}return true};var D=function(b){var a=b.replace(/[0-9]*/,"");b=b.replace(/[A-Za-z]{1,2}}/,"");switch(a.toLowerCase()){case"s":b=+b;break;case"mi":b=b*60;break;case"h":b=b*60*60;break;case"d":b=b*24*60*60;break;case"m":b=b*30*24*60*60;break;case"y":b=b*365*24*60*60;break;default:b=undefined;break}return b===undefined?"":"; max-age="+b};var W=function(a){setTimeout(function(){var f=JSON.parse(I(a,a.options.cookieIdTable,S.filterControl));if(!a.options.filterControlValuesLoaded&&f){a.options.filterControlValuesLoaded=true;var b={},c=U(a),d=R(a),e=function(g,h){T(h).each(function(i,j){T(g).val(j.text);b[j.field]=j.text})};c.find(d).each(function(){var g=T(this).closest("[data-field]").data("field"),h=T.grep(f,function(i){return i.field===g});e(this,h)});a.initColumnSearch(b)}},250)};T.extend(T.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});T.fn.bootstrapTable.methods.push("getCookies");T.fn.bootstrapTable.methods.push("deleteCookie");T.extend(T.fn.bootstrapTable.utils,{setCookie:L,getCookie:I});var N=T.fn.bootstrapTable.Constructor,O=N.prototype.init,P=N.prototype.initTable,Q=N.prototype.initServer,z=N.prototype.onSort,H=N.prototype.onPageNumber,F=N.prototype.onPageListChange,G=N.prototype.onPageFirst,E=N.prototype.onPagePre,X=N.prototype.onPageNext,A=N.prototype.onPageLast,J=N.prototype.toggleColumn,M=N.prototype.selectPage,B=N.prototype.onSearch;N.prototype.init=function(){var a=0;this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var b=this;this.$el.on("column-search.bs.table",function(d,e,c){var f=true;for(var g=0;g<b.options.filterControls.length;g++){if(b.options.filterControls[g].field===e){b.options.filterControls[g].text=c;f=false;break}}if(f){b.options.filterControls.push({field:e,text:c})}L(b,S.filterControl,JSON.stringify(b.options.filterControls))}).on("post-body.bs.table",W(b))}O.apply(this,Array.prototype.slice.apply(arguments))};N.prototype.initServer=function(){var d=this,a=[],b=function(f){return f.filterControl&&f.filterControl==="select"},e=function(f){return f.filterData&&f.filterData!=="column"},c=function(){var f=JSON.parse(I(d,d.options.cookieIdTable,S.filterControl));return d.options.cookie&&f};a=T.grep(d.columns,function(f){return b(f)&&!e(f)});N.prototype.initServer=Q;if(this.options.filterControl&&c()&&a.length===0){return}Q.apply(this,Array.prototype.slice.apply(arguments))};N.prototype.initTable=function(){P.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};N.prototype.initCookie=function(){if(!this.options.cookie){return}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!K())){throw new Error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies")}var e=I(this,this.options.cookieIdTable,S.sortOrder),f=I(this,this.options.cookieIdTable,S.sortName),a=I(this,this.options.cookieIdTable,S.pageNumber),b=I(this,this.options.cookieIdTable,S.pageList),c=JSON.parse(I(this,this.options.cookieIdTable,S.columns)),d=I(this,this.options.cookieIdTable,S.searchText);this.options.sortOrder=e?e:this.options.sortOrder;this.options.sortName=f?f:this.options.sortName;this.options.pageNumber=a?+a:this.options.pageNumber;this.options.pageSize=b?b===this.options.formatAllRows()?b:+b:this.options.pageSize;this.options.searchText=d?d:"";if(c){T.each(this.columns,function(h,g){g.visible=T.inArray(g.field,c)!==-1})}};N.prototype.onSort=function(){z.apply(this,Array.prototype.slice.apply(arguments));L(this,S.sortOrder,this.options.sortOrder);L(this,S.sortName,this.options.sortName)};N.prototype.onPageNumber=function(){H.apply(this,Array.prototype.slice.apply(arguments));L(this,S.pageNumber,this.options.pageNumber)};N.prototype.onPageListChange=function(){F.apply(this,Array.prototype.slice.apply(arguments));L(this,S.pageList,this.options.pageSize)};N.prototype.onPageFirst=function(){G.apply(this,Array.prototype.slice.apply(arguments));L(this,S.pageNumber,this.options.pageNumber)};N.prototype.onPagePre=function(){E.apply(this,Array.prototype.slice.apply(arguments));L(this,S.pageNumber,this.options.pageNumber)};N.prototype.onPageNext=function(){X.apply(this,Array.prototype.slice.apply(arguments));L(this,S.pageNumber,this.options.pageNumber)};N.prototype.onPageLast=function(){A.apply(this,Array.prototype.slice.apply(arguments));L(this,S.pageNumber,this.options.pageNumber)};N.prototype.toggleColumn=function(){J.apply(this,Array.prototype.slice.apply(arguments));var a=[];T.each(this.columns,function(b,c){if(c.visible){a.push(c.field)}});L(this,S.columns,JSON.stringify(a))};N.prototype.selectPage=function(a){M.apply(this,Array.prototype.slice.apply(arguments));L(this,S.pageNumber,a)};N.prototype.onSearch=function(){var a=Array.prototype.slice.apply(arguments);B.apply(this,a);if(T(a[0].currentTarget).parent().hasClass("search")){L(this,S.searchText,this.searchText)}};N.prototype.getCookies=function(){var a=this;var b={};T.each(S,function(d,c){b[d]=I(a,a.options.cookieIdTable,c);if(d==="columns"){b[d]=JSON.parse(b[d])}});return b};N.prototype.deleteCookie=function(a){if((a==="")||(!K())){return}V(this,this.options.cookieIdTable,S[a])}})(jQuery);