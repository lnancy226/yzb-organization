!function(t){function s(d){var c=d.$header;return d.options.height&&(c=d.$tableHeader),c}function r(b){return s(b).find("[data-filter-field]")}function q(a){var c=r(a);t.isEmptyObject(a.filterColumnsPartial)||c.each(function(u,j){var i=t(j),h=i.attr("data-filter-field"),b=a.filterColumnsPartial[h];i.is("select")?i.val(b).trigger("change"):i.val(b)})}function p(a,z){var y,x,w=!1,v=0;if(t.each(a.columns,function(c,e){if(y="hidden",x=[],e.visible){if(e.filter){var d=e.filter["class"]?" "+e.filter["class"]:"";switch(x.push('<div style="margin: 0px 2px 2px 2px;" class="filter'+d+'">'),e.searchable&&(w=!0,y="visible"),e.filter.type.toLowerCase()){case"input":x.push('<input type="text" data-filter-field="'+e.field+'" style="width: 100%; visibility:'+y+'">');break;case"select":x.push('<select data-filter-field="'+e.field+'" style="width: 100%; visibility:'+y+'"></select>')}}else{x.push('<div class="no-filter"></div>')}t.each(z.children().children(),function(f,g){return g=t(g),g.data("field")===e.field?(g.find(".fht-cell").append(x.join("")),!1):void 0})}}),w){var u=z.find("input"),j=z.find("select");u.length>0&&(u.off("keyup").on("keyup",function(b){clearTimeout(v),v=setTimeout(function(){a.onColumnSearch(b)},a.options.searchTimeOut)}),u.off("mouseup").on("mouseup",function(g){var f=t(this),b=f.val();""!==b&&setTimeout(function(){var c=f.val();""===c&&(clearTimeout(v),v=setTimeout(function(){a.onColumnSearch(g)},a.options.searchTimeOut))},1)})),j.length>0&&j.on("select2:select",function(b){a.onColumnSearch(b)})}else{z.find(".filter").hide()}}function o(b){var a=s(b);t.each(b.columns,function(d,c){if(c.filter&&"select"===c.filter.type){var h=a.find("select[data-filter-field="+c.field+"]");if(h.length>0&&!h.data().select2){c.filter.data.unshift("");var g={placeholder:"",allowClear:!0,data:c.filter.data,dropdownParent:b.$el.closest(".bootstrap-table")};h.select2(g),h.on("select2:unselecting",function(e){e.preventDefault(),h.val(null).trigger("change"),b.searchText=void 0,b.onColumnSearch(e)})}}})}t.extend(t.fn.bootstrapTable.defaults,{filter:!1,filterValues:{}}),t.extend(t.fn.bootstrapTable.COLUMN_DEFAULTS,{filter:void 0});var n=t.fn.bootstrapTable.Constructor,m=n.prototype.init,l=n.prototype.initHeader,k=n.prototype.initSearch;n.prototype.init=function(){if(this.options.filter){var a=this;t.isEmptyObject(a.options.filterValues)||(a.filterColumnsPartial=a.options.filterValues,a.options.filterValues={}),this.$el.on("reset-view.bs.table",function(){a.options.height&&(a.$tableHeader.find("select").length>0||a.$tableHeader.find("input").length>0||p(a,a.$tableHeader))}).on("post-header.bs.table",function(){var b=0;o(a),clearTimeout(b),b=setTimeout(function(){q(a)},a.options.searchTimeOut-1000)}).on("column-switch.bs.table",function(){q(a)})}m.apply(this,Array.prototype.slice.apply(arguments))},n.prototype.initHeader=function(){l.apply(this,Array.prototype.slice.apply(arguments)),this.options.filter&&p(this,this.$header)},n.prototype.initSearch=function(){k.apply(this,Array.prototype.slice.apply(arguments));var a=this,d=a.filterColumnsPartial;"client"===a.options.sidePagination&&(this.data=t.grep(this.data,function(w,v){for(var u in d){var j=a.columns[t.fn.bootstrapTable.utils.getFieldIndex(a.columns,u)],c=d[u].toLowerCase(),b=w[u];if(b=t.fn.bootstrapTable.utils.calculateObjectValue(a.header,a.header.formatters[t.inArray(u,a.header.fields)],[b,w,v],b),j.filterStrictSearch){if(-1===t.inArray(u,a.header.fields)||"string"!=typeof b&&"number"!=typeof b||b.toString().toLowerCase()!==c.toString().toLowerCase()){return !1}}else{if(-1===t.inArray(u,a.header.fields)||"string"!=typeof b&&"number"!=typeof b||-1===(b+"").toLowerCase().indexOf(c)){return !1}}}return !0}))},n.prototype.onColumnSearch=function(a){var f=t(a.currentTarget).attr("data-filter-field"),e=t.trim(t(a.currentTarget).val());t.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),e?this.filterColumnsPartial[f]=e:delete this.filterColumnsPartial[f],this.options.pageNumber=1,this.onSearch(a)},n.prototype.setFilterData=function(j,i){var h=this,b=s(h),a=b.find('select[data-filter-field="'+j+'"]');i.unshift(""),a.empty(),a.select2({data:i,placeholder:"",allowClear:!0,dropdownParent:h.$el.closest(".bootstrap-table")}),t.each(this.columns,function(d,c){return c.field===j?(c.filter.data=i,!1):void 0})},n.prototype.setFilterValues=function(b){this.filterColumnsPartial=b},t.fn.bootstrapTable.methods.push("setFilterData"),t.fn.bootstrapTable.methods.push("setFilterValues")}(jQuery);