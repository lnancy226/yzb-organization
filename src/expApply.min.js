var tagData=[{value:"",text:"古玩"},{value:"",text:"文玩"},{value:"",text:"珠宝"},{value:"",text:"字画"},{value:"",text:"观赏石"},{value:"",text:"花鸟鱼虫"},{value:"",text:"加工雕刻"},{value:"",text:"珠宝检测"},{value:"",text:"包装配饰"},{value:"",text:"其他"}];var Authorization=$.cookie("Authorization");alert(Authorization+"token");var expType,cityId,provinceId;var citydata=[];cityData2=cityData.slice(0,31);cityData2.push(cityData[32]);cityData2.push(cityData[33]);cityData2.push(cityData[31]);console.log(cityData2,"citydata2222");cityData=cityData2;getProvince();goodsTag();function goodsTag(){$.ajax({url:"http://120.27.226.156:8080/roo-mobile-web/tag/read/list/goods?parentId=0",type:"GET",contentType:"application/json;charset=utf-8",success:function(a){console.log(a,"一级宝贝标签");$.each(a.data,function(b,c){tagData[b].value=c.id});console.log(tagData)}})}function getProvince(){var a=JSON.stringify({level:0,parentId:0});$.ajax({url:"http://120.27.226.156:8080/roo-mobile-web/cnarea/read/list",type:"put",contentType:"application/json;charset=utf-8",data:a,success:function(c){console.log(c,"获取省份");console.log(cityData,"cityData插件");$.each(c.data,function(d,e){cityData[d].value=e.id;cityData[d].text=e.mergerName;delete cityData[d].children;citydata[d]={text:e.mergerName,children:[]};citydata.push(citydata[d]);b(e.id,d)});function b(h,d){var e=d;var g=citydata[e].children;var f=JSON.stringify({level:1,parentId:h});$.ajax({url:"http://120.27.226.156:8080/roo-mobile-web/cnarea/read/list",type:"PUT",contentType:"application/json;charset=utf-8",data:f,success:function(j){$.each(j.data,function(k,l){g[k]={value:l.id,text:l.name};g.push(g[k])});cityData[e].children=g}})}}})}(function(a,b){console.log(citydata,"citydata-my");a.init();a.ready(function(){var g=function(k,l){return k[l]||""};var f=new a.PopPicker();f.setData(tagData);var j=b.getElementById("showTypePicker");var d=b.getElementById("typeResult");j.addEventListener("tap",function(k){f.show(function(l){d.innerText=l[0].text;expType=l[0].value})},false);console.log(cityData,"citydata6666");var c=new a.PopPicker({layer:2});c.setData(cityData);var e=b.getElementById("showCityPicker");var h=b.getElementById("cityResult");e.addEventListener("tap",function(k){c.show(function(l){h.innerText=l[0].text+" "+l[1].text;console.log(l[0].value,l[0].text,"item0");console.log(l[1].value,l[1].text,"item1");provinceId=l[0].value;cityId=l[1].value})},false)})})(mui,document);$(function(){mui.init({});var c=document.getElementsByClassName("prompt-btn");var a=document.getElementsByClassName("my-info");var b=document.getElementsByClassName("inp-type");console.log(a,c);for(i=0;i<c.length;i++){c[i].index=i;c[i].addEventListener("tap",function(h){var j=this;h.detail.gesture.preventDefault();var f=b[this.index].innerText;var g="请填写"+f;console.log(g);var d=["取消","确定"];mui.prompt(g,"","",d,function(k){if(k.index===1){a[j.index].innerText=k.value}});if(this.index===2){$(".mui-popup-input input").attr("type","tel")}$(".mui-popup-title").remove()})}});$(function(){$(".app-submit").on("tap",function(){if($("#typeResult").text()==""){mui.toast("所属类型不能为空！");return}if($("#cityResult").text()==""){mui.toast("所在地区不能为空！");return}parameters=JSON.stringify({name:$(".expName").text(),organ:$(".organ").text(),type:expType,phone:$(".phone").text(),provinceId:provinceId,cityId:cityId,remark:$("#remark").val()});console.log(parameters,"专家入驻参数");$.ajax({url:"http://120.27.226.156:8080/roo-mobile-web/expert",beforeSend:function(a){a.setRequestHeader("Authorization",Authorization)},type:"post",contentType:"application/json;charset=utf-8",data:parameters,success:function(a){if(a.httpCode==200){location.href="./experts-detail.html"}else{alert("提交失败"+a.msg)}}})})});