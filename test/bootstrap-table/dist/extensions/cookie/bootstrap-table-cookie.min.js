(function(e){var f={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var d=function(z){var A=z.$header;if(z.options.height){A=z.$tableHeader}return A};var g=function(z){var A="select, input";if(z.options.height){A="table select, table input"}return A};var n=function(){return !!(navigator.cookieEnabled)};var v=function(C,z){var A=-1;for(var B=0;B<z.length;B++){if(C.toLowerCase()===z[B].toLowerCase()){A=B;break}}return A};var m=function(z,B,A){if((!z.options.cookie)||(!n())||(z.options.cookieIdTable==="")){return}if(v(B,z.options.cookiesEnabled)===-1){return}B=z.options.cookieIdTable+"."+B;switch(z.options.cookieStorage){case"cookieStorage":document.cookie=[B,"=",A,"; expires="+z.options.cookieExpire,z.options.cookiePath?"; path="+z.options.cookiePath:"",z.options.cookieDomain?"; domain="+z.options.cookieDomain:"",z.options.cookieSecure?"; secure":""].join("");break;case"localStorage":localStorage.setItem(B,A);break;case"sessionStorage":sessionStorage.setItem(B,A);break;default:return false}return true};var p=function(A,z,B){if(!B){return null}if(v(B,A.options.cookiesEnabled)===-1){return null}B=z+"."+B;switch(A.options.cookieStorage){case"cookieStorage":return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(B).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;case"localStorage":return localStorage.getItem(B);case"sessionStorage":return sessionStorage.getItem(B);default:return null}};var c=function(A,z,B){B=z+"."+B;switch(A.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(B),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",A.options.cookiePath?"; path="+A.options.cookiePath:"",A.options.cookieDomain?"; domain="+A.options.cookieDomain:""].join("");break;case"localStorage":localStorage.removeItem(B);break;case"sessionStorage":sessionStorage.removeItem(B);break}return true};var u=function(z){var A=z.replace(/[0-9]*/,"");z=z.replace(/[A-Za-z]{1,2}}/,"");switch(A.toLowerCase()){case"s":z=+z;break;case"mi":z=z*60;break;case"h":z=z*60*60;break;case"d":z=z*24*60*60;break;case"m":z=z*30*24*60*60;break;case"y":z=z*365*24*60*60;break;default:z=undefined;break}return z===undefined?"":"; max-age="+z};var b=function(z){setTimeout(function(){var B=JSON.parse(p(z,z.options.cookieIdTable,f.filterControl));if(!z.options.filterControlValuesLoaded&&B){z.options.filterControlValuesLoaded=true;var A={},E=d(z),D=g(z),C=function(G,F){e(F).each(function(I,H){e(G).val(H.text);A[H.field]=H.text})};E.find(D).each(function(){var G=e(this).closest("[data-field]").data("field"),F=e.grep(B,function(H){return H.field===G});C(this,F)});z.initColumnSearch(A)}},250)};e.extend(e.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});e.fn.bootstrapTable.methods.push("getCookies");e.fn.bootstrapTable.methods.push("deleteCookie");e.extend(e.fn.bootstrapTable.utils,{setCookie:m,getCookie:p});var k=e.fn.bootstrapTable.Constructor,j=k.prototype.init,i=k.prototype.initTable,h=k.prototype.initServer,y=k.prototype.onSort,q=k.prototype.onPageNumber,s=k.prototype.onPageListChange,r=k.prototype.onPageFirst,t=k.prototype.onPagePre,a=k.prototype.onPageNext,x=k.prototype.onPageLast,o=k.prototype.toggleColumn,l=k.prototype.selectPage,w=k.prototype.onSearch;k.prototype.init=function(){var A=0;this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var z=this;this.$el.on("column-search.bs.table",function(E,D,F){var C=true;for(var B=0;B<z.options.filterControls.length;B++){if(z.options.filterControls[B].field===D){z.options.filterControls[B].text=F;C=false;break}}if(C){z.options.filterControls.push({field:D,text:F})}m(z,f.filterControl,JSON.stringify(z.options.filterControls))}).on("post-body.bs.table",b(z))}j.apply(this,Array.prototype.slice.apply(arguments))};k.prototype.initServer=function(){var C=this,A=[],D=function(E){return E.filterControl&&E.filterControl==="select"},B=function(E){return E.filterData&&E.filterData!=="column"},z=function(){var E=JSON.parse(p(C,C.options.cookieIdTable,f.filterControl));return C.options.cookie&&E};A=e.grep(C.columns,function(E){return D(E)&&!B(E)});k.prototype.initServer=h;if(this.options.filterControl&&z()&&A.length===0){return}h.apply(this,Array.prototype.slice.apply(arguments))};k.prototype.initTable=function(){i.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};k.prototype.initCookie=function(){if(!this.options.cookie){return}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!n())){throw new Error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies")}var z=p(this,this.options.cookieIdTable,f.sortOrder),B=p(this,this.options.cookieIdTable,f.sortName),A=p(this,this.options.cookieIdTable,f.pageNumber),E=p(this,this.options.cookieIdTable,f.pageList),D=JSON.parse(p(this,this.options.cookieIdTable,f.columns)),C=p(this,this.options.cookieIdTable,f.searchText);this.options.sortOrder=z?z:this.options.sortOrder;this.options.sortName=B?B:this.options.sortName;this.options.pageNumber=A?+A:this.options.pageNumber;this.options.pageSize=E?E===this.options.formatAllRows()?E:+E:this.options.pageSize;this.options.searchText=C?C:"";if(D){e.each(this.columns,function(F,G){G.visible=e.inArray(G.field,D)!==-1})}};k.prototype.onSort=function(){y.apply(this,Array.prototype.slice.apply(arguments));m(this,f.sortOrder,this.options.sortOrder);m(this,f.sortName,this.options.sortName)};k.prototype.onPageNumber=function(){q.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,this.options.pageNumber)};k.prototype.onPageListChange=function(){s.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageList,this.options.pageSize)};k.prototype.onPageFirst=function(){r.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,this.options.pageNumber)};k.prototype.onPagePre=function(){t.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,this.options.pageNumber)};k.prototype.onPageNext=function(){a.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,this.options.pageNumber)};k.prototype.onPageLast=function(){x.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,this.options.pageNumber)};k.prototype.toggleColumn=function(){o.apply(this,Array.prototype.slice.apply(arguments));var z=[];e.each(this.columns,function(A,B){if(B.visible){z.push(B.field)}});m(this,f.columns,JSON.stringify(z))};k.prototype.selectPage=function(z){l.apply(this,Array.prototype.slice.apply(arguments));m(this,f.pageNumber,z)};k.prototype.onSearch=function(){var z=Array.prototype.slice.apply(arguments);w.apply(this,z);if(e(z[0].currentTarget).parent().hasClass("search")){m(this,f.searchText,this.searchText)}};k.prototype.getCookies=function(){var A=this;var z={};e.each(f,function(B,C){z[B]=p(A,A.options.cookieIdTable,C);if(B==="columns"){z[B]=JSON.parse(z[B])}});return z};k.prototype.deleteCookie=function(z){if((z==="")||(!n())){return}c(this,this.options.cookieIdTable,f[z])}})(jQuery);