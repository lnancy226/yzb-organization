"use strict";var fs=require("fs");module.exports=function(b){b.initConfig({pkg:b.file.readJSON("bootstrap-table.jquery.json"),banner:'/*\n* <%= pkg.name %> - v<%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>\n<%= pkg.homepage ? "* " + pkg.homepage : "" %>\n* Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>\n* Licensed <%= _.pluck(pkg.licenses, "type").join(", ") %>\n*/\n',clean:["dist","docs/dist"],concat:{locale_target:{src:["src/locale/**/*.js"],dest:"dist/<%= pkg.name %>-locale-all.js"}},uglify:{options:{banner:"<%= banner %>"},basic_target:{files:{"dist/<%= pkg.name %>.min.js":["src/<%=pkg.name %>.js"],"dist/<%= pkg.name %>-locale-all.min.js":["dist/<%=pkg.name %>-locale-all.js"]}},locale_target:{files:[{expand:true,cwd:"src/locale",src:"**/*.js",dest:"dist/locale",ext:".min.js"}]},extensions_target:{files:[{expand:true,cwd:"src/extensions",src:"**/*.js",dest:"dist/extensions",ext:".min.js"}]}},cssmin:{add_banner:{options:{banner:"<%= banner %>"},files:{"dist/<%= pkg.name %>.min.css":["src/<%=pkg.name %>.css"]}}},copy:{source:{cwd:"src",src:["**/*.js","**/*.css"],dest:"dist",expand:true},files:{cwd:"dist",src:"**/*",dest:"docs/dist",expand:true}},release:{options:{additionalFiles:["bootstrap-table.jquery.json"],beforeRelease:["docs","default"]}}});var a=function(f,d,e){var c=fs.readFileSync(f,"utf8").split("\n");c.forEach(function(g,h){if(g.indexOf(e)===0){c[h]=e+d}});fs.writeFileSync(f,c.join("\n"),"utf8");b.log.ok("bumped version of "+f+" to "+d)};b.registerTask("docs","build the docs",function(){var f=require("./package.json").version;a("./_config.yml",f,"current_version: ");a("./src/bootstrap-table.js",f," * version: ");a("./src/bootstrap-table.css",f," * version: ");var e=fs.readFileSync("./CHANGELOG.md","utf8");var c=e.split("### ")[1];var g=new Date();var d=["### Latest release ("+[g.getFullYear(),g.getMonth()+1,g.getDate()].join("-")+")","","#### v"+c];fs.writeFileSync("./docs/_includes/latest-release.md",d.join("\n"),"utf8");b.log.ok("updated the latest-release.md to "+f)});b.loadNpmTasks("grunt-contrib-clean");b.loadNpmTasks("grunt-contrib-concat");b.loadNpmTasks("grunt-contrib-uglify");b.loadNpmTasks("grunt-contrib-cssmin");b.loadNpmTasks("grunt-contrib-copy");b.loadNpmTasks("grunt-release");b.registerTask("default",["clean","concat","uglify","cssmin","copy"])};