!function(C){var r,E="data-tt-id",y="data-tt-parent-id",D={},A=undefined;var G=function(b,a){var d=b.$body.find("tr").not("[data-tt-parent-id]");for(var c=0;c<d.length;c++){if(c===a){return C(d[c]).attr("data-tt-id")}}return undefined};var v=function(b,a){var c={};C.each(a,function(f,e){if(!e.IsParent){for(var d in e){if(!isNaN(parseFloat(e[d]))){if(b.columns[C.fn.bootstrapTable.utils.getFieldIndex(b.columns,d)].groupBySumGroup){if(c[d]===undefined){c[d]=0}c[d]+=+e[d]}}}}});return c};var B=function(a,b){r.apply([a,b]);D[E.toString()]=b;if(!a.IsParent){D[y.toString()]=A===undefined?b:A}else{A=b;delete D[y.toString()]}return D};var H=function(){Object.keys=function(a){if(a!==Object(a)){throw new TypeError("Object.keys called on a non-object")}var c=[],b;for(b in a){if(Object.prototype.hasOwnProperty.call(a,b)){c.push(b)}}return c}};var u=function(a,b){var d=[];for(var c=0;c<a.options.groupByField.length;c++){d.push(b[a.options.groupByField[c]])}return d};var z=function(a,e,c){var d={};for(var b=0;b<a.options.groupByField.length;b++){d[a.options.groupByField[b].toString()]=e[c][0][a.options.groupByField[b]]}d.IsParent=true;return d};var s=function(a,b){var c={};C.each(a,function(f,d){var e=JSON.stringify(b(d));c[e]=c[e]||[];c[e].push(d)});return Object.keys(c).map(function(d){return c[d]})};var x=function(b,a){var c=[],e={};var f=s(a,function(g){return u(b,g)});for(var d=0;d<f.length;d++){f[d].unshift(z(b,f,d));if(b.options.groupBySumGroup){e=v(b,f[d]);if(!C.isEmptyObject(e)){f[d].push(e)}}}c=c.concat.apply(c,f);if(!b.options.loaded&&c.length>0){b.options.loaded=true;b.options.originalData=b.options.data;b.options.data=c}return c};C.extend(C.fn.bootstrapTable.defaults,{groupBy:false,groupByField:[],groupBySumGroup:false,groupByInitExpanded:undefined,loaded:false,originalData:undefined});C.fn.bootstrapTable.methods.push("collapseAll","expandAll","refreshGroupByField");C.extend(C.fn.bootstrapTable.COLUMN_DEFAULTS,{groupBySumGroup:false});var F=C.fn.bootstrapTable.Constructor,w=F.prototype.init,t=F.prototype.initData;F.prototype.init=function(){if(!this.options.sortName){if((this.options.groupBy)&&(this.options.groupByField.length>0)){var a=this;if(!Object.keys){C.fn.bootstrapTable.utils.objectKeys()}this.options.loaded=false;this.options.originalData=undefined;r=this.options.rowAttributes;this.options.rowAttributes=B;this.$el.on("post-body.bs.table",function(){a.$el.treetable({expandable:true,onNodeExpand:function(){if(a.options.height){a.resetHeader()}},onNodeCollapse:function(){if(a.options.height){a.resetHeader()}}},true);if(a.options.groupByInitExpanded!==undefined){if(typeof a.options.groupByInitExpanded==="number"){a.expandNode(a.options.groupByInitExpanded)}else{if(a.options.groupByInitExpanded.toLowerCase()==="all"){a.expandAll()}}}})}}w.apply(this,Array.prototype.slice.apply(arguments))};F.prototype.initData=function(a,b){if(!this.options.sortName){if((this.options.groupBy)&&(this.options.groupByField.length>0)){this.options.groupByField=typeof this.options.groupByField==="string"?this.options.groupByField.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.groupByField;a=x(this,a?a:this.options.data)}}t.apply(this,[a,b])};F.prototype.expandAll=function(){this.$el.treetable("expandAll")};F.prototype.collapseAll=function(){this.$el.treetable("collapseAll")};F.prototype.expandNode=function(a){a=G(this,a);if(a!==undefined){this.$el.treetable("expandNode",a)}};F.prototype.refreshGroupByField=function(a){if(!C.fn.bootstrapTable.utils.compareObjects(this.options.groupByField,a)){this.options.groupByField=a;this.load(this.options.originalData)}}}(jQuery);