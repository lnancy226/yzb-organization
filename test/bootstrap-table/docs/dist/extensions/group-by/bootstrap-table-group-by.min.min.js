!function(F){var E,D="data-tt-id",C="data-tt-parent-id",B={},A=void 0,z=function(a,h){for(var g=a.$body.find("tr").not("[data-tt-parent-id]"),f=0;f<g.length;f++){if(f===h){return F(g[f]).attr("data-tt-id")}}return void 0},y=function(a,f){var e={};return F.each(f,function(g,d){if(!d.IsParent){for(var b in d){isNaN(parseFloat(d[b]))||a.columns[F.fn.bootstrapTable.utils.getFieldIndex(a.columns,b)].groupBySumGroup&&(void 0===e[b]&&(e[b]=0),e[b]+=+d[b])}}}),e},x=function(b,c){return E.apply([b,c]),B[D.toString()]=c,b.IsParent?(A=c,delete B[C.toString()]):B[C.toString()]=void 0===A?c:A,B},w=function(f,e){for(var h=[],g=0;g<f.options.groupByField.length;g++){h.push(e[f.options.groupByField[g]])}return h},v=function(g,f,j){for(var i={},h=0;h<g.options.groupByField.length;h++){i[g.options.groupByField[h].toString()]=f[j][0][g.options.groupByField[h]]}return i.IsParent=!0,i},u=function(a,f){var e={};return F.each(a,function(d,c){var g=JSON.stringify(f(c));e[g]=e[g]||[],e[g].push(c)}),Object.keys(e).map(function(b){return e[b]})},t=function(a,l){for(var k=[],j={},i=u(l,function(b){return w(a,b)}),h=0;h<i.length;h++){i[h].unshift(v(a,i,h)),a.options.groupBySumGroup&&(j=y(a,i[h]),F.isEmptyObject(j)||i[h].push(j))}return k=k.concat.apply(k,i),!a.options.loaded&&k.length>0&&(a.options.loaded=!0,a.options.originalData=a.options.data,a.options.data=k),k};F.extend(F.fn.bootstrapTable.defaults,{groupBy:!1,groupByField:[],groupBySumGroup:!1,groupByInitExpanded:void 0,loaded:!1,originalData:void 0}),F.fn.bootstrapTable.methods.push("collapseAll","expandAll","refreshGroupByField"),F.extend(F.fn.bootstrapTable.COLUMN_DEFAULTS,{groupBySumGroup:!1});var s=F.fn.bootstrapTable.Constructor,r=s.prototype.init,q=s.prototype.initData;s.prototype.init=function(){if(!this.options.sortName&&this.options.groupBy&&this.options.groupByField.length>0){var a=this;Object.keys||F.fn.bootstrapTable.utils.objectKeys(),this.options.loaded=!1,this.options.originalData=void 0,E=this.options.rowAttributes,this.options.rowAttributes=x,this.$el.on("post-body.bs.table",function(){a.$el.treetable({expandable:!0,onNodeExpand:function(){a.options.height&&a.resetHeader()},onNodeCollapse:function(){a.options.height&&a.resetHeader()}},!0),void 0!==a.options.groupByInitExpanded&&("number"==typeof a.options.groupByInitExpanded?a.expandNode(a.options.groupByInitExpanded):"all"===a.options.groupByInitExpanded.toLowerCase()&&a.expandAll())})}r.apply(this,Array.prototype.slice.apply(arguments))},s.prototype.initData=function(d,c){this.options.sortName||this.options.groupBy&&this.options.groupByField.length>0&&(this.options.groupByField="string"==typeof this.options.groupByField?this.options.groupByField.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.groupByField,d=t(this,d?d:this.options.data)),q.apply(this,[d,c])},s.prototype.expandAll=function(){this.$el.treetable("expandAll")},s.prototype.collapseAll=function(){this.$el.treetable("collapseAll")},s.prototype.expandNode=function(b){b=z(this,b),void 0!==b&&this.$el.treetable("expandNode",b)},s.prototype.refreshGroupByField=function(a){F.fn.bootstrapTable.utils.compareObjects(this.options.groupByField,a)||(this.options.groupByField=a,this.load(this.options.originalData))}}(jQuery);