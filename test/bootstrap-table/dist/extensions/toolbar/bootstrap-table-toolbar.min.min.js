!function(r){var q=!1,p=r.fn.bootstrapTable.utils.sprintf,o=function(a,v,u,t){if(r("#avdSearchModal_"+t.options.idTable).hasClass("modal")){r("#avdSearchModal_"+t.options.idTable).modal()}else{var s=p('<div id="avdSearchModal%s"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">',"_"+t.options.idTable);s+='<div class="modal-dialog modal-xs">',s+=' <div class="modal-content">',s+='  <div class="modal-header">',s+='   <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>',s+=p('   <h4 class="modal-title">%s</h4>',v),s+="  </div>",s+='  <div class="modal-body modal-body-custom">',s+=p('   <div class="container-fluid" id="avdSearchModalContent%s" style="padding-right: 0px;padding-left: 0px;" >',"_"+t.options.idTable),s+="   </div>",s+="  </div>",s+="  </div>",s+=" </div>",s+="</div>",r("body").append(r(s));var e=n(a,u,t),c=0;r("#avdSearchModalContent_"+t.options.idTable).append(e.join("")),r("#"+t.options.idForm).off("keyup blur","input").on("keyup blur","input",function(b){clearTimeout(c),c=setTimeout(function(){t.onColumnAdvancedSearch(b)},t.options.searchTimeOut)}),r("#btnCloseAvd_"+t.options.idTable).click(function(){r("#avdSearchModal_"+t.options.idTable).modal("hide")}),r("#avdSearchModal_"+t.options.idTable).modal()}},n=function(h,c,u){var t=[];t.push(p('<form class="form-horizontal" id="%s" action="%s" >',u.options.idForm,u.options.actionForm));for(var s in h){var i=h[s];!i.checkbox&&i.visible&&i.searchable&&(t.push('<div class="form-group">'),t.push(p('<label class="col-sm-4 control-label">%s</label>',i.title)),t.push('<div class="col-sm-6">'),t.push(p('<input type="text" class="form-control input-md" name="%s" placeholder="%s" id="%s">',i.field,i.title,i.field)),t.push("</div>"),t.push("</div>"))}return t.push('<div class="form-group">'),t.push('<div class="col-sm-offset-9 col-sm-3">'),t.push(p('<button type="button" id="btnCloseAvd%s" class="btn btn-default" >%s</button>',"_"+u.options.idTable,c)),t.push("</div>"),t.push("</div>"),t.push("</form>"),t};r.extend(r.fn.bootstrapTable.defaults,{advancedSearch:!1,idForm:"advancedSearch",actionForm:"",idTable:void 0,onColumnAdvancedSearch:function(){return !1}}),r.extend(r.fn.bootstrapTable.defaults.icons,{advancedSearchIcon:"glyphicon-chevron-down"}),r.extend(r.fn.bootstrapTable.Constructor.EVENTS,{"column-advanced-search.bs.table":"onColumnAdvancedSearch"}),r.extend(r.fn.bootstrapTable.locales,{formatAdvancedSearch:function(){return"Advanced search"},formatAdvancedCloseButton:function(){return"Close"}}),r.extend(r.fn.bootstrapTable.defaults,r.fn.bootstrapTable.locales);var m=r.fn.bootstrapTable.Constructor,l=m.prototype.initToolbar,k=m.prototype.load,j=m.prototype.initSearch;m.prototype.initToolbar=function(){if(l.apply(this,Array.prototype.slice.apply(arguments)),this.options.search&&this.options.advancedSearch&&this.options.idTable){var d=this,c=[];c.push(p('<div class="columns columns-%s btn-group pull-%s" role="group">',this.options.buttonsAlign,this.options.buttonsAlign)),c.push(p('<button class="btn btn-default%s" type="button" name="advancedSearch" aria-label="advanced search" title="%s">',void 0===d.options.iconSize?"":" btn-"+d.options.iconSize,d.options.formatAdvancedSearch())),c.push(p('<i class="%s %s"></i>',d.options.iconsPrefix,d.options.icons.advancedSearchIcon)),c.push("</button></div>"),d.$toolbar.prepend(c.join("")),d.$toolbar.find('button[name="advancedSearch"]').off("click").on("click",function(){o(d.columns,d.options.formatAdvancedSearch(),d.options.formatAdvancedCloseButton(),d)})}},m.prototype.load=function(){if(k.apply(this,Array.prototype.slice.apply(arguments)),this.options.advancedSearch&&"undefined"!=typeof this.options.idTable&&!q){var a=parseInt(r(".bootstrap-table").height());a+=10,r("#"+this.options.idTable).bootstrapTable("resetView",{height:a}),q=!0}},m.prototype.initSearch=function(){if(j.apply(this,Array.prototype.slice.apply(arguments)),this.options.advancedSearch){var a=this,d=r.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=d?r.grep(this.data,function(t,s){for(var i in d){var c=d[i].toLowerCase(),b=t[i];if(b=r.fn.bootstrapTable.utils.calculateObjectValue(a.header,a.header.formatters[r.inArray(i,a.header.fields)],[b,t,s],b),-1===r.inArray(i,a.header.fields)||"string"!=typeof b&&"number"!=typeof b||-1===(b+"").toLowerCase().indexOf(c)){return !1}}return !0}):this.data}},m.prototype.onColumnAdvancedSearch=function(a){var f=r.trim(r(a.currentTarget).val()),e=r(a.currentTarget)[0].id;r.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),f?this.filterColumnsPartial[e]=f:delete this.filterColumnsPartial[e],this.options.pageNumber=1,this.onSearch(a),this.updatePagination(),this.trigger("column-advanced-search",e,f)}}(jQuery);