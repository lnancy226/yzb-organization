(function(k){k.extend(k.fn.bootstrapTable.defaults,{clickEdit:false});function h(b,c){var a=k("<option />");if(c){k(c).each(function(d,e){a.clone().text(e.idxNum+" "+e.name).val(e.idxNum).appendTo(b)})}else{console.log("Please setup options first!!")}}function m(b,g){var f=[],x=b,e='<button type="button" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button>',w='<button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>';var c=function(){f=[];g.find("td").find('input[type="text"]').each(function(o,p){f.push(k(p).eq(0).val())});g.find("select").each(function(o,p){f.push(k("#"+p.id+" option:selected").val())});k("#table").bootstrapTable("updateRow",{index:x.$data.thId,row:{noOld:f[0],area:g.find("select").eq(0).children(":selected").text(),town:g.find("select").eq(1).children(":selected").text(),address:f[1]}});k("#tooling").remove();x.editing=true;return false};var a=function(){k("#table").bootstrapTable("updateRow",{index:x.$data.thId,row:{}});k("#tooling").remove();x.editing=true;return false};if(x.editing){var d=0;x.editing=false;x.columns.forEach(function(q,r){if(!q.editable){return}switch(q.editable){case"input":var o=k('<div class="editable-input col-md-12 col-sm-12 col-xs-12" style="position: relative;"/>');f.push(g.find("td").eq(q.fieldIndex).text());o.append(k('<input type="text" class="form-control input-sm"/>'));o.append(k('<span class="clear"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span>'));g.find("td").eq(q.fieldIndex).text("").append(o);break;case"select":var p=k('<select id="'+q.field+'">'),s=k.selectArray[q.field];g.find("td").eq(q.fieldIndex).text("").append(p);h(k("#"+q.field),s);break;case"textarea":break;default:console.log(q.fieldIndex+" "+q.editable)}},b);for(var u=0,v=f.length;u<v;u++){g.find('input[type="text"]').eq(u).val(f[u])}g.find("td").last().append('<div id="tooling" class="editable-buttons"/>');k(".clear").on("click",function(){k(this).parent().find("input").val("")});k(e).on("click",c).appendTo("#tooling");k(w).on("click",a).appendTo("#tooling")}}function j(c,a){var b=k(c).find("a").attr("href").match(/\d+/g)[0];var d={treeId:b,oldTreeSerialNo:a[0],adminDivision:a[2],adminUnit:a[3],treeAddr:a[1]};store("data/update",d)}var i=k.fn.bootstrapTable.Constructor,l=i.prototype.initTable,n=i.prototype.initBody;i.prototype.initTable=function(){var a=this;this.$data={};l.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){return}};i.prototype.initBody=function(){var a=this;n.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){return}var b=this.$tableBody.find("table");a.editing=true;b.on("click-row.bs.table",function(d,c,f,e){if(e==="no"){return}this.$data.thId=f.data().index;this.$data.itemid=f.data().uniqueid;this.$data.divi=parseInt(c.area);this.$data.town=parseInt(c.town);m(this,f)}.bind(this))}})(jQuery);